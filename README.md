<div align="center">
  <img width="200px" height="180px" src="public/favicon.ico" alt="ArcChat Logo" style="
    margin-bottom: 20px;
    filter: brightness(1.05) contrast(1.1);
    transition: all 0.3s ease;
  " />
  <h1 style="
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', Arial, sans-serif;
    font-size: 4.5rem; 
    font-weight: 700; 
    background: linear-gradient(135deg, #007AFF 0%, #2ba1d8ff 50%, #0e76fdff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 10px 0 20px 0;
    letter-spacing: -3px;
    line-height: 1.1;
    text-align: center;
  ">ArcHat</h1>
</div>
<div align="center">
  <img src="https://img.shields.io/badge/spring-boot3-brightgreen?logo=spring">
  <img src="https://img.shields.io/badge/netty-gren
">
  <img src="https://img.shields.io/badge/MyBatis--Plus-00A1E9?logo=mybatis&logoColor=white">
  <img src="https://img.shields.io/badge/RabbitMQ-FF6600?logo=rabbitmq&logoColor=white">
  <img src="https://img.shields.io/badge/Redis-DC382D?logo=redis&logoColor=white">
  <br/>
  <img src="https://img.shields.io/badge/MySQL-4479A1?logo=mysql&logoColor=white">
  <img src="https://img.shields.io/badge/Java-17-ED8B00?logo=openjdk&logoColor=white">
  <img src="https://img.shields.io/badge/Maven-C71A36?logo=apachemaven&logoColor=white">
  <img src="https://img.shields.io/badge/LangChain4j-1.0.1-9cf?logoColor=white">
</div>

<p align="center">
  github：<a href="https://github.com/senjay2580/ArcHat-server/stargazers"><img src="https://img.shields.io/github/stars/senjay2580/ArcHat-server?style=social" alt="star"></a>
</p>

---
## 📖 项目介绍

**ArcChat** 是一款基于 **Spring Boot 3**、**Netty**、**MyBatis-Plus**、**RabbitMQ** 和 **LangChain4j** 构建 一款仿飞书的企业级通讯与协作平台，集私聊、群聊与安全权限管理于一体，支持接口多维限流、敏感词过滤、会话管理、消息实时推送、语音通话、文档协作以及智能 AI 助手，旨在提升团队沟通效率与协作体验。


---

## 🖼️ 项目预览

### 🏠 登录注册 & 主页

<div align="center">
  <table>
    <tr>
      <td width="50%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/Login^register.png" alt="登录注册" />
        <p align="center"><b>登录注册界面</b></p>
      </td>
      <td width="50%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/home.png" alt="主页" />
        <p align="center"><b>主页（日间模式）</b></p>
      </td>
    </tr>
    <tr>
      <td width="50%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/home-night.png" alt="主页-夜间" />
        <p align="center"><b>主页（夜间模式）</b></p>
      </td>
      <td width="50%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/search.png" alt="搜索功能" />
        <p align="center"><b>好友/群聊全局搜索</b></p>
      </td>
    </tr>
  </table>
</div>


### 💬 聊天功能

<div align="center">
  <table>
    <tr>
      <td width="50%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/chat.png" alt="私聊" />
        <p align="center"><b>私聊界面</b></p>
      </td>
      <td width="50%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/groupchat1.png" alt="群聊" />
        <p align="center"><b>群聊界面</b></p>
      </td>
    </tr>
    <tr>
      <td width="50%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/groupchat2.png" alt="群聊消息" />
        <p align="center"><b>群聊信息</b></p>
      </td>
      <td width="50%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/groupManage.png" alt="群组管理" />
        <p align="center"><b>群聊管理</b></p>
      </td>
    </tr>
  </table>
</div>


### 🤖 AI 智能助手

<div align="center">
  <table>
    <tr>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/AiWelcome.png" alt="AI欢迎界面" />
        <p align="center"><b>AI 欢迎界面</b></p>
      </td>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/Aichat1.png" alt="AI聊天1" />
        <p align="center"><b>AI 对话界面(一)</b></p>
      </td>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/Aichat2.png" alt="AI聊天2" />
        <p align="center"><b>AI 对话界面（二）</b></p>
      </td>
    </tr>
  </table>
</div>


### 📞 音视频通话

<div align="center">
  <table>
    <tr>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/audio_call.png" alt="语音通话" />
        <p align="center"><b>语音通话待机</b></p>
      </td>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/video_call1.png" alt="视频通话1" />
        <p align="center"><b>视频通话待机</b></p>
      </td>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/video_call2.png" alt="视频通话2" />
        <p align="center"><b>视频通话界面</b></p>
      </td>
    </tr>
  </table>
</div>


### 👤 用户中心 & 效率工具

<div align="center">
  <table>
    <tr>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/userHub.png" alt="用户中心" />
        <p align="center"><b>用户中心</b></p>
      </td>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/mail.png" alt="邮箱" />
        <p align="center"><b>消息中心</b></p>
      </td>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/todo.png" alt="待办事项" />
        <p align="center"><b>数据统计和其他功能</b></p>
      </td>
    </tr>
    <tr>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/TodoList.png" alt="待办列表" />
        <p align="center"><b>待办列表详情</b></p>
      </td>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/note1.png" alt="笔记" />
        <p align="center"><b>笔记编辑器</b></p>
      </td>
      <td width="33.3%">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/note2.png" alt="笔记列表" />
        <p align="center"><b>笔记管理</b></p>
      </td>
    </tr>
    <tr>
      <td colspan="3" align="center">
        <img src="https://raw.githubusercontent.com/senjay2580/ArcHat/main/preview/note3.png" alt="笔记富文本" style="max-width: 66%;" />
        <p align="center"><b>富文本笔记编辑</b></p>
      </td>
    </tr>
  </table>
</div>











---

## ✨核心亮点

### 💬 即时通讯能力

- **单聊/群聊系统**：基于 **Netty WebSocket 实现高性能实时消息推送**，支持文本、表情、图片、文件等多种消息类型
-  **消息管理**：消息持久化存储、历史记录分页查询、消息撤回、离线消息推送
-  **好友系统**：用户搜索、好友申请/审批、好友关系管理、申请记录查询
-  **群组管理**：群组创建/解散、成员邀请/踢出、权限分级管理（群主/管理员/普通成员）、群公告发布

### 🤖 AI 智能集成

-  **智能对话**：集成 **LangChain4j** + **通义千问**，支持流式响应的 AI 聊天助手
-  **上下文记忆**：基于 Redis 的会话级上下文管理，AI 能理解多轮对话历史
-  **文档问答 (RAG)**：支持 PDF 文档上传解析，AI 可基于文档内容进行智能问答
-  **向量检索**：Redis 向量存储 + 嵌入模型，实现快速相关知识检索

### 📞 音视频通话

-  **WebRTC 信令服务**：自研信令服务器，**支持一对一视频/语音通话**
-  **多人会议**：多人音视频会议功能

### 🛡️ 系统安全与性能

-  **用户认证系统**：JWT Token 认证、用户注册/登录、个人信息管理
-  **文件存储**：阿里云 OSS 集成，支持头像上传、文件分享
-  **访问控制**：IP 归属地查询、用户访问记录统计
-  **接口防护**：基于注解的多维度频率限制**（用户级、IP级、接口级）**
-  **API 文档**：Knife4j 自动生成接口文档，支持在线调试

---

## 🎯 核心功能

### 1. 实时通讯架构

- **WebSocket 管理**：基于 Netty 实现的 WebSocket 服务器，支持连接管理、心跳检测、断线重连
- **消息路由**：消息类型枚举 + 策略模式，支持文本、图片、文件、系统通知等多种消息类型
- **在线状态**：Redis 存储用户在线状态，实时更新好友列表状态

### 2. AI 智能助手

- **流式响应**：基于 WebFlux 实现 AI 对话的流式输出，提升用户体验
- **RAG 检索**：PDF 文档解析 → 文本分块 → 向量化 → Redis 向量存储 → 相似度检索
- **上下文管理**：会话级别的对话历史存储，支持多轮对话理解

### 3. 群组权限系统

- **分级权限**：群主（创建/解散群）→ 管理员（踢人/禁言）→ 普通成员
- **申请审批流程**：申请 → 审核 → 通知 → 入群，支持申请留言修改
- **成员管理**：邀请入群、主动退群、踢出成员、权限变更

### 4. 安全防护机制

- **频率控制**：基于 AOP + Redis 实现的接口限流，支持滑动窗口算法
- **JWT 认证**：双 Token 机制（Admin/Client），支持 Token 刷新
- **敏感词过滤**：消息内容实时检测，违规内容拦截

---

## 🔥 正在开发中
- 🤖 **RAG 增强检索**
  - [ ] 多个AI模型集成
  - [ ] AI 会话管理
  - [ ] 多模态文档解析（PDF、Word、PPT、图片）
  - [ ] 向量数据库优化（支持更多嵌入模型）
- 🛠️ **Tool Calling 工具调用**
  - [ ] 函数调用框架集成
  - [ ] 自定义工具插件系统
  - [ ] API 工具自动发现与注册
  - [ ] 工具调用结果缓存机制
- 🔌 **MCP 协议支持**
  - [ ] Model Context Protocol 集成
  - [ ] 多模型上下文共享
  - [ ] 跨模型会话管理
  - [ ] MCP 服务器适配器
- 🔄 **AI 工作流引擎**
  - [ ] 可视化工作流设计器
  - [ ] 条件分支与循环控制
  - [ ] 多步骤任务编排
  - [ ] 工作流模板库
- 📝 **文档协作功能**
  - [ ] 实时协同编辑
  - [ ] 文档版本控制与历史记录
  - [ ] 多人同时编辑冲突解决
  - [ ] 文档评论与批注系统
  - [ ] Markdown 实时预览
- 🎯 **朋友圈功能**（数据权限）
  - [ ] 动态发布（文字、图片、视频）
  - [ ] 点赞、评论、转发
  - [ ] 朋友圈权限设置
  - [ ] 动态时间线展示
- 🎵 **语音消息**
  - [ ] 语音录制与发送
  - [ ] 语音消息播放
  - [ ] 语音消息时长显示
- 📊 **通话记录展示**
  - [ ] 视频通话历史记录
  - [ ] 语音通话历史记录
- 📹 **视频通话功能**
  - [x] 一对一视频通话
  - [ ] 多人视频会议
  - [ ] 屏幕共享功能
  - [ ] 通话录制与回放
  - [ ] 通话质量自适应
- 📺 **直播功能**
  - [ ] 个人直播间创建
  - [ ] 实时视频推流
  - [ ] 直播弹幕互动
  - [ ] 直播回放存储
  - [ ] 直播权限管理
  - [ ] 观众统计与分析
- 🏢 **会议系统**
  - [ ] 会议室预约管理
  - [ ] 会议邀请与通知
  - [ ] 会议白板协作
  - [ ] 会议纪要自动生成
  - [ ] 会议文件共享
  - [ ] 会议投票与决策
- 📱 多端适配与开发****
  - [ ] **消息离线缓存、上线后自动推送**
  - [ ] Web 端（Vue3 + TypeScript）
  - [ ] 桌面端（Electron 跨平台）
  - [ ] 移动端开发
    - [ ] Android 原生应用
    - [ ] Flutter 跨平台方案
  - [ ] 小程序端
    - [ ] 微信小程序
  - [ ] 多端数据同步与状态管理
  - [ ] 消息推送适配（APNs/FCM/统一推送）
  - [ ] 离线消息跨端同步

---

## 🛠️ 技术选型

### 后端技术栈

| 技术组件         | 版本   | 应用场景                                 |
| :--------------- | :----- | :--------------------------------------- |
| **Spring Boot**  | 3.5.0  | 核心框架，提供依赖注入、自动配置         |
| **Netty**        | 4.1.76 | WebSocket 长连接服务，支持万级并发       |
| **MyBatis-Plus** | 3.5.7  | ORM 框架，简化数据库操作                 |
| **MySQL**        | 8.0    | 主数据库，存储用户、消息、群组等核心数据 |
| **Redis**        | Latest | 缓存 + 向量存储，会话管理、消息队列      |
| **RabbitMQ**     | Latest | 消息中间件，异步任务处理、消息广播       |
| **LangChain4j**  | 1.0.1  | AI 框架，集成大模型、RAG、向量检索       |

### 前端技术栈

| 技术组件         | 版本   | 应用场景             |
| :--------------- | :----- | :------------------- |
| **Vue 3**        | 3.5.13 | 前端框架，组合式 API |
| **Vite**         | 6.2.4  | 构建工具，快速热更新 |
| **Element Plus** | 2.9.10 | UI 组件库            |
| **Pinia**        | 3.0.1  | 状态管理             |
| **TipTap**       | 3.0.7  | 富文本编辑器         |
| **Axios**        | 1.9.0  | HTTP 客户端          |

### 数据存储

| 技术栈 | 版本 | 说明 |
|--------|------|------|
| MySQL | 8.0.25 | 关系型数据库，存储用户、消息等核心数据 |
| Redis | Latest | 内存数据库，用于会话缓存、向量存储、分布式锁 |

### 工具库
| 技术栈 | 版本 | 说明 |
|--------|------|------|
| Hutool | 5.8.23 | Java 工具类库，简化常见操作 |
| Knife4j | 4.5.0 | API 文档增强工具（Swagger UI 替代方案） |
| JJWT | 0.11.5 | JWT Token 生成与验证 |
| Aliyun OSS | 3.17.4 | 阿里云对象存储，用于文件/图片存储 |
| Lombok | 1.18.32 | 简化 Java 代码（自动生成 getter/setter 等） |

### 为什么选择这些技术？
- **Spring Boot 3**：采用最新的 Jakarta EE 标准，性能提升 30%，内存占用降低 20%
- **Netty**：业界公认的高性能网络框架，能轻松支持万级并发 WebSocket 连接
- **RabbitMQ**：消息队列解耦异步任务，提升系统扩展性和可靠性
- **LangChain4j**：原生 Java 集成 AI 能力，无需 Python 环境，简化部署

---

### 安装部署（3 步启动）

#### 1️⃣ 克隆项目
```bash
git clone https://github.com/yourusername/archat.git
cd archat/archat-server
```

#### 2️⃣ 配置文件
复制配置模板并修改为实际配置：
```bash
cp src/main/resources/application.yml.example src/main/resources/application.yml
```

编辑 `application.yml`，替换以下配置：
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/archat  # 数据库连接
    username: root
    password: YOUR_DB_PASSWORD  # ⚠️ 替换为你的数据库密码
  
  data:
    redis:
      host: localhost
      port: 6379
  
  rabbitmq:
    host: localhost
    username: YOUR_RABBITMQ_USERNAME  # ⚠️ 替换
    password: YOUR_RABBITMQ_PASSWORD  # ⚠️ 替换

archat:
  jwt:
    admin-secret-key: YOUR_ADMIN_JWT_SECRET   # ⚠️ 64位随机字符串
    client-secret-key: YOUR_CLIENT_JWT_SECRET # ⚠️ 64位随机字符串
  
  alioss:
    access-key-id: YOUR_OSS_ACCESS_KEY      # ⚠️ 阿里云OSS密钥
    access-key-secret: YOUR_OSS_SECRET

langchain4j:
  open-ai:
    embedding-model:
      api-key: YOUR_AI_API_KEY  # ⚠️ 通义千问API Key
    streaming-chat-model:
      api-key: YOUR_AI_API_KEY
    chat-model:
      api-key: YOUR_AI_API_KEY
```

#### 3️⃣ 启动项目
```bash
# 方式一：Maven 直接运行
mvn spring-boot:run

# 方式二：打包后运行
mvn clean package -DskipTests
java -jar target/archat-server-1.0-SNAPSHOT.jar
```

✅ 启动成功后访问：
- 后端服务：http://localhost:8080
- API 文档：http://localhost:8080/doc.html（需开启 knife4j）
- **WebSocket：ws://localhost:8090**
